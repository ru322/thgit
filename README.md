# ThGit

**このツールは、まだ実用の段階に達していません。あくまで事前にバックアップをしたうえで、ご利用ください**

東方Projectのユーザデータ(リプレイ、設定ファイル、スコアデータ)をGitでバージョン管理するためのスクリプトです。本体のバイナリデータは除外し、セーブデータ、リプレイのみを記録、同期します。
# 概要

<!-- 東方Projectの作品ディレクトリ内で実行することで、Gitリポジトリの初期化、適切な .gitignore の設定、および変更履歴のコミットを自動化（または補助）する。 -->
東方Projectのインストール先で`thgit.ps1`を実行することで、Gitリポジトリの設定が行われ、起動ショートカットがデスクトップに追加されます。

このショートカットを用いることで、自動的にpull, pushが行われます。
# 特徴
一回セットアップを済ませれば特に意識することなく、Git連携がスタートします。

# 動作環境
- Windows 11
- PowerShellが入っていること
- Gitがインストールされていること（未インストールの場合は初回起動時にインストールを試みます）
- 作品のインストール先が非システムフォルダであること

# 使い方

インストール先の親フォルダでコマンドプロンプトを起動し、次のコマンドを入力・実行します。
全ての作品が一箇所で管理されていることを前提にしています。

リモートリポジトリの登録が求められるので、GitHubなどでリポジトリを作成し、そのURLを渡してください。
**※スコアやリプレイデータには個人のプレイ履歴が含まれます。意図せず公開したくない場合は、Private（非公開）リポジトリを作成することを強く推奨します。**
```
curl -o thgit.ps1 https://raw.githubusercontent.com/ru322/thgit/main/thgit.ps1
powershell -ExecutionPolicy Bypass -NoExit -File "thgit.ps1"
```

デスクトップに`thxx-thgit`というショートカットが作成されるのでそこからゲームを起動してください。

# 仕様上の注意
`sync.json`によって、管理するファイル、フォルダを指定しています。現状`th06,th07,th08,th09`が対象です。対応していない作品についてもある程度容易に登録することが可能ですが、実行ファイルを含めてしまった場合、法律に触れる可能性があります。

## 同期の競合について
複数のPCでプレイする場合、同時にプレイしたり、同期を行わずにプレイを開始すると、データの競合（コンフリクト）が発生する可能性があります。
競合が発生した場合、本ツールは「サーバー上のデータを正としてローカルを上書きする」か「同期をスキップする」かの選択を求めます。
大切なデータを失わないよう、こまめな同期を心がけてください。

## 他の同期ツールとの併用について
OneDrive、Dropbox、Google Driveなどのクラウド同期フォルダ内で本ツールを使用すると、同期処理が競合し、データが破損する恐れがあります。
本ツールを使用する場合は、これらのクラウド同期の対象外のフォルダにゲームをインストールしてください。

# 免責事項

本ツールは「上海アリス幻樂団」及びZUN氏とは一切関係のない非公式ツールです。

また、このプロジェクトは現在進行系で開発中であり、今後メンテナンスされる保証は一切ありません。また、このツールを使用・改造したことに起因するいかなる事象について制作者は責任を負いません。あくまで自己責任での活用となります。

本ツールを使用した結果、ゲームデータの破損や消失が発生した場合でも、製作者は一切の責任を負いません。必ず事前にバックアップを取得した上で利用してください。

ゲーム本体のデータ（.datファイル等）をリポジトリに含めて公開することは、著作権法および原作者のガイドラインに抵触する恐れがあるため、安易に設定を変更しないことを強く推奨します。

本ソフトウェアは MIT License の下で公開されています。

Copyright (c) 2025 ru322